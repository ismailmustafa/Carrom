var gameLogic;!function(a){function b(){for(var b=[],c=0;c<a.ROWS;c++){b[c]=[];for(var d=0;d<a.COLS;d++)b[c][d]=""}return b}function c(){return{board:b(),delta:null}}function d(b){for(var c=0;c<a.ROWS;c++)for(var d=0;d<a.COLS;d++)if(""===b[c][d])return!1;return!0}function e(b){for(var c="",d=0;d<a.ROWS;d++)for(var e=0;e<a.COLS;e++){var f=b[d][e];c+=""===f?" ":f}for(var g=["XXX......","...XXX...","......XXX","X..X..X..",".X..X..X.","..X..X..X","X...X...X","..X.X.X.."],h=0,i=g;h<i.length;h++){var j=i[h],k=new RegExp(j),l=new RegExp(j.replace(/X/g,"O"));if(k.test(c))return"X";if(l.test(c))return"O"}return""}function f(a,b,f,g){a||(a=c());var h=a.board;if(""!==h[b][f])throw new Error("One can only make a move in an empty position!");if(""!==e(h)||d(h))throw new Error("Can only make a move if the game is not over!");var i=angular.copy(h);i[b][f]=0===g?"X":"O";var j,k,l=e(i);""!==l||d(i)?(k=-1,j="X"===l?[1,0]:"O"===l?[0,1]:[0,0]):(k=1-g,j=null);var m={row:b,col:f},n={delta:m,board:i};return{endMatchScores:j,turnIndexAfterMove:k,stateAfterMove:n}}function g(a){var b=a.turnIndexBeforeMove,c=a.stateBeforeMove,d=a.move,e=a.move.stateAfterMove.delta,g=e.row,h=e.col,i=f(c,g,h,b);if(!angular.equals(d,i))throw new Error("Expected move="+angular.toJson(i,!0)+", but got stateTransition="+angular.toJson(a,!0))}function h(){var b=a.createMove(null,0,0,0);console.log("move=",b);var c={turnIndexBeforeMove:0,stateBeforeMove:null,move:b,numberOfPlayers:2};a.checkMoveOk(c)}a.ROWS=3,a.COLS=3,a.getInitialState=c,a.createMove=f,a.checkMoveOk=g,a.forSimpleTestHtml=h}(gameLogic||(gameLogic={}));var game;!function(a){function b(){console.log("Translation of 'RULES_OF_TICTACTOE' is "+translate("RULES_OF_TICTACTOE")),resizeGameAreaService.setWidthToHeight(1),moveService.setGame({minNumberOfPlayers:2,maxNumberOfPlayers:2,checkMoveOk:gameLogic.checkMoveOk,updateUI:e}),document.addEventListener("animationend",c,!1),document.addEventListener("webkitAnimationEnd",c,!1),document.addEventListener("oanimationend",c,!1);var a=window;a.HTMLInspector&&setTimeout(function(){a.HTMLInspector.inspect({excludeRules:["unused-classes","script-placement"]})},0)}function c(){$rootScope.$apply(function(){log.info("Animation ended"),a.animationEnded=!0,d()})}function d(){a.isComputerTurn&&(a.isComputerTurn=!1,moveService.makeMove(aiService.findComputerMove(a.move)))}function e(b){log.info("Game got updateUI:",b),a.animationEnded=!1,a.move=b.move,a.state=a.move.stateAfterMove,a.state||(a.state=gameLogic.getInitialState()),a.canMakeMove=a.move.turnIndexAfterMove>=0&&b.yourPlayerIndex===a.move.turnIndexAfterMove,a.isComputerTurn=a.canMakeMove&&""===b.playersInfo[b.yourPlayerIndex].playerId,a.isComputerTurn&&(a.canMakeMove=!1,a.state.delta||d())}function f(b,c){if(log.info("Clicked on cell:",b,c),"?throwException"===window.location.search)throw new Error("Throwing the error because URL has '?throwException'");if(a.canMakeMove)try{var d=gameLogic.createMove(a.state,b,c,a.move.turnIndexAfterMove);a.canMakeMove=!1,moveService.makeMove(d)}catch(e){return void log.info(["Cell is already full in position:",b,c])}}function g(b,c){var d=a.state.board[b][c];return""!==d}function h(b,c){return"X"===a.state.board[b][c]}function i(b,c){return"O"===a.state.board[b][c]}function j(b,c){return!a.animationEnded&&a.state.delta&&a.state.delta.row===b&&a.state.delta.col===c}a.animationEnded=!1,a.canMakeMove=!1,a.isComputerTurn=!1,a.move=null,a.state=null,a.isHelpModalShown=!1,a.init=b,a.cellClicked=f,a.shouldShowImage=g,a.isPieceX=h,a.isPieceO=i,a.shouldSlowlyAppear=j}(game||(game={})),angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).run(function(){$rootScope.game=game,translate.setLanguage("en",{RULES_OF_TICTACTOE:"Rules of TicTacToe",RULES_SLIDE1:"You and your opponent take turns to mark the grid in an empty spot. The first mark is X, then O, then X, then O, etc.",RULES_SLIDE2:"The first to mark a whole row, column or diagonal wins.",CLOSE:"Close"}),game.init()});var aiService;!function(a){function b(a){return d(a,{millisecondsLimit:1e3})}function c(a,b){for(var c=[],d=0;d<gameLogic.ROWS;d++)for(var e=0;e<gameLogic.COLS;e++)try{c.push(gameLogic.createMove(a,d,e,b))}catch(f){}return c}function d(a,b){return alphaBetaService.alphaBetaDecision(a,a.turnIndexAfterMove,f,e,null,b)}function e(a){var b=a.endMatchScores;return b?b[0]>b[1]?Number.POSITIVE_INFINITY:b[0]<b[1]?Number.NEGATIVE_INFINITY:0:0}function f(a,b){return c(a.stateAfterMove,b)}a.findComputerMove=b,a.getPossibleMoves=c,a.createComputerMove=d}(aiService||(aiService={}));
//# sourceMappingURL=everything.min.js.map